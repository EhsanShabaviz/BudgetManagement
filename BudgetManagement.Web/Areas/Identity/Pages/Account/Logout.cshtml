@page
@attribute [Authorize]

@using BudgetManagement.Application.Interfaces
@using Microsoft.AspNetCore.Authorization
@using System.Security.Claims

@inject IAuthService authService

@{
    Layout = null;
}

@functions
{

    public async Task<IActionResult> OnGet()
    {
        var userId = User.FindFirstValue(ClaimTypes.NameIdentifier) ?? "";

        if (!string.IsNullOrEmpty(userId))
        {
            await authService.LogoutAsync(userId);
        }

        return Redirect("~/");
    }
}